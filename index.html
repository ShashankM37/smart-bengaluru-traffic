<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart Bengaluru Traffic</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Poppins',sans-serif;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:white;
}
header{
  padding:20px;
  text-align:center;
  font-size:26px;
  font-weight:700;
  background:rgba(0,0,0,.35);
  backdrop-filter:blur(10px);
}
.screen{display:none;padding:18px}
.active{display:block}
.card{
  background:rgba(255,255,255,.12);
  backdrop-filter:blur(14px);
  border-radius:20px;
  padding:18px;
  margin-bottom:16px;
  box-shadow:0 10px 40px rgba(0,0,0,.4);
}
h2{margin-top:0}
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:14px;
  background:linear-gradient(135deg,#ff512f,#dd2476);
  color:white;
  font-size:16px;
  font-weight:600;
  margin-top:10px;
  cursor:pointer;
}
.back{background:linear-gradient(135deg,#555,#222)}
input,select,textarea{
  width:100%;
  padding:12px;
  margin-bottom:10px;
  border-radius:12px;
  border:none;
  outline:none;
}
.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:14px;
}
.tile{
  background:linear-gradient(135deg,#00c6ff,#0072ff);
  padding:26px;
  border-radius:22px;
  text-align:center;
  font-size:18px;
  font-weight:700;
  cursor:pointer;
  transition:transform .3s;
}
.tile:hover{transform:scale(1.07)}
ul{padding-left:18px}
iframe{border-radius:18px}
small{opacity:.7}
</style>
</head>

<body>

<header>ğŸš¦ Smart Bengaluru Traffic</header>

<!-- HOME -->
<div id="home" class="screen active">
  <div class="card">
    <h2>Move Smart. Beat Traffic.</h2>
    <p>Live updates â€¢ Citizens connect â€¢ Smart rides</p>
  </div>

  <div class="grid">
    <div class="tile" onclick="openScreen('live')">ğŸ“ Live Traffic</div>
    <div class="tile" onclick="openScreen('road')">ğŸš§ Roadblocks</div>
    <div class="tile" onclick="openScreen('carpool')">ğŸš— Carpool</div>
    <div class="tile" onclick="openScreen('students')">ğŸ“ Students</div>
    <div class="tile" onclick="openScreen('workers')">ğŸ‘· Workers</div>
    <div class="tile" onclick="openScreen('help')">ğŸ†˜ Emergency</div>
  </div>
</div>

<!-- LIVE -->
<div id="live" class="screen">
<div class="card">
<h2>Live Traffic</h2>
<iframe width="100%" height="320"
src="https://www.google.com/maps?q=bangalore&output=embed"></iframe>
<button class="back" onclick="openScreen('home')">Back</button>
</div>
</div>

<!-- ROADBLOCKS -->
<div id="road" class="screen">
<div class="card">
<h2>Report Roadblock</h2>
<input id="rb_loc" placeholder="Location">
<select id="rb_type">
<option>Accident</option>
<option>Heavy Traffic</option>
<option>Construction</option>
</select>
<textarea id="rb_det" placeholder="Details"></textarea>
<button onclick="addRoadblock()">Submit</button>
</div>

<div class="card">
<h2>Live Reports</h2>
<ul id="roadList"></ul>
<button class="back" onclick="openScreen('home')">Back</button>
</div>
</div>

<!-- CARPOOL -->
<div id="carpool" class="screen">
<div class="card">
<h2>Host Ride (Host Only)</h2>
<input id="hostPin" placeholder="Host PIN">
<input id="from" placeholder="From">
<input id="to" placeholder="To">
<input id="time" placeholder="Time">
<input id="seats" type="number" placeholder="Seats">
<button onclick="addRide()">Add Ride</button>
</div>

<div class="card">
<h2>Join Ride</h2>
<ul id="rideList"></ul>
<button class="back" onclick="openScreen('home')">Back</button>
</div>
</div>

<!-- STUDENTS -->
<div id="students" class="screen">
<div class="card">
<h2>Student Mode</h2>
<ul>
<li>Metro & BMTC</li>
<li>Carpool</li>
<li>Travel early</li>
</ul>
<button class="back" onclick="openScreen('home')">Back</button>
</div>
</div>

<!-- WORKERS -->
<div id="workers" class="screen">
<div class="card">
<h2>Worker Mode</h2>
<ul>
<li>Avoid peak hours</li>
<li>Alternate routes</li>
<li>WFH if possible</li>
</ul>
<button class="back" onclick="openScreen('home')">Back</button>
</div>
</div>

<!-- HELP -->
<div id="help" class="screen">
<div class="card">
<h2>Emergency</h2>
<a href="tel:112"><button>ğŸ“ Call 112</button></a>
<button class="back" onclick="openScreen('home')">Back</button>
</div>
</div>

<script>
function openScreen(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

/* ğŸ”¥ FIREBASE CONFIG â€“ REPLACE WITH YOUR KEYS */
firebase.initializeApp({
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT_ID"
});
const db = firebase.firestore();

/* ROADBLOCKS */
function addRoadblock(){
  db.collection("roadblocks").add({
    location: rb_loc.value,
    type: rb_type.value,
    details: rb_det.value,
    time: new Date().toLocaleString()
  });
}

db.collection("roadblocks").orderBy("time","desc").onSnapshot(s=>{
  roadList.innerHTML="";
  s.forEach(d=>{
    let r=d.data();
    roadList.innerHTML+=`
    <li><b>${r.type}</b> @ ${r.location}<br>
    ${r.details}<br><small>${r.time}</small></li>`;
  });
});

/* CARPOOL */
function addRide(){
  db.collection("carpool").add({
    hostPin: hostPin.value,
    from: from.value,
    to: to.value,
    time: time.value,
    seats: seats.value
  });
}

db.collection("carpool").onSnapshot(s=>{
  rideList.innerHTML="";
  s.forEach(d=>{
    let r=d.data();
    rideList.innerHTML+=`
    <li><b>${r.from}</b> â ${r.to}<br>
    â° ${r.time} | Seats: ${r.seats}</li>`;
  });
});
</script>

</body>
</html>
