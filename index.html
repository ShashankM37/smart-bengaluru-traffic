<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart Bengaluru Traffic</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{
  margin:0;
  font-family: 'Segoe UI', sans-serif;
  background:linear-gradient(135deg,#e3f2fd,#ffffff);
}
header{
  background:#0d47a1;
  color:white;
  padding:16px;
  text-align:center;
  font-size:24px;
  font-weight:bold;
}
.screen{display:none;padding:16px}
.active{display:block}
.card{
  background:white;
  padding:16px;
  margin-bottom:14px;
  border-radius:16px;
  box-shadow:0 10px 25px rgba(0,0,0,.15);
}
button{
  width:100%;
  padding:12px;
  margin-top:8px;
  border:none;
  border-radius:10px;
  background:#1565c0;
  color:white;
  font-size:16px;
}
.back{background:#555}
input,select,textarea{
  width:100%;
  padding:10px;
  margin-bottom:8px;
  border-radius:10px;
  border:1px solid #ccc;
}
.tile{
  background:#1976d2;
  color:white;
  padding:20px;
  border-radius:16px;
  text-align:center;
  font-weight:bold;
  cursor:pointer;
}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
ul{padding-left:18px}
</style>
</head>

<body>

<header>ğŸš¦ Smart Bengaluru Traffic</header>

<div id="home" class="screen active">
  <div class="card">
    <h2>Welcome</h2>
    <p>Live Traffic â€¢ Road Reports â€¢ Carpooling</p>
  </div>

  <div class="grid">
    <div class="tile" onclick="openScreen('live')">ğŸ“ Live Traffic</div>
    <div class="tile" onclick="openScreen('road')">ğŸš§ Roadblocks</div>
    <div class="tile" onclick="openScreen('carpool')">ğŸš— Carpool</div>
    <div class="tile" onclick="openScreen('students')">ğŸ“ Students</div>
    <div class="tile" onclick="openScreen('workers')">ğŸ‘· Workers</div>
    <div class="tile" onclick="openScreen('help')">ğŸ†˜ Emergency</div>
  </div>
</div>

<!-- LIVE -->
<div id="live" class="screen">
<div class="card">
<h2>Live Traffic</h2>
<iframe width="100%" height="300" src="https://www.google.com/maps?q=bangalore&output=embed"></iframe>
<button class="back" onclick="openScreen('home')">Back</button>
</div>
</div>

<!-- ROADBLOCKS -->
<div id="road" class="screen">
<div class="card">
<h2>Report Roadblock</h2>
<input id="rb_loc" placeholder="Location">
<select id="rb_type">
<option>Accident</option>
<option>Traffic</option>
<option>Construction</option>
</select>
<textarea id="rb_det" placeholder="Details"></textarea>
<button onclick="addRoadblock()">Submit</button>
</div>

<div class="card">
<h3>Live Reports</h3>
<ul id="roadList"></ul>
<button class="back" onclick="openScreen('home')">Back</button>
</div>
</div>

<!-- CARPOOL -->
<div id="carpool" class="screen">
<div class="card">
<h2>Host a Ride (Only Host)</h2>
<input id="hostPin" placeholder="Host PIN">
<input id="from" placeholder="From">
<input id="to" placeholder="To">
<input id="time" placeholder="Time">
<input id="seats" type="number" placeholder="Seats">
<button onclick="addRide()">Add Ride</button>
</div>

<div class="card">
<h2>Available Rides</h2>
<ul id="rideList"></ul>
<button class="back" onclick="openScreen('home')">Back</button>
</div>
</div>

<!-- STUDENTS -->
<div id="students" class="screen">
<div class="card">
<h2>Student Mode</h2>
<ul>
<li>Use Metro</li>
<li>Travel Early</li>
<li>Carpool</li>
</ul>
<button class="back" onclick="openScreen('home')">Back</button>
</div>
</div>

<!-- WORKERS -->
<div id="workers" class="screen">
<div class="card">
<h2>Worker Mode</h2>
<ul>
<li>Alternate routes</li>
<li>Avoid peak hours</li>
</ul>
<button class="back" onclick="openScreen('home')">Back</button>
</div>
</div>

<!-- HELP -->
<div id="help" class="screen">
<div class="card">
<h2>Emergency</h2>
<a href="tel:112">ğŸ“ Call 112</a>
<button class="back" onclick="openScreen('home')">Back</button>
</div>
</div>

<script>
function openScreen(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

/* ğŸ”¥ FIREBASE CONFIG (KEEP YOUR OWN KEYS) */
firebase.initializeApp({
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT"
});

const db = firebase.firestore();

/* ROADBLOCKS */
function addRoadblock(){
  db.collection("roadblocks").add({
    location: rb_loc.value,
    type: rb_type.value,
    details: rb_det.value,
    time: new Date().toLocaleString()
  });
}

db.collection("roadblocks").onSnapshot(s=>{
  roadList.innerHTML="";
  s.forEach(d=>{
    let x=d.data();
    roadList.innerHTML+=`<li><b>${x.type}</b> @ ${x.location}<br>${x.details}<br><small>${x.time}</small></li>`;
  });
});

/* CARPOOL */
function addRide(){
  db.collection("carpool").add({
    hostPin: hostPin.value,
    from: from.value,
    to: to.value,
    time: time.value,
    seats: seats.value
  });
}

db.collection("carpool").onSnapshot(s=>{
  rideList.innerHTML="";
  s.forEach(d=>{
    let r=d.data();
    rideList.innerHTML+=`<li>${r.from} â ${r.to} | ${r.time} | Seats: ${r.seats}</li>`;
  });
});
</script>

</body>
</html>
